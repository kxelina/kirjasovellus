{% extends "layout.html" %}
{% block content %}

<head>
  <title>My Bookshelf</title>
  <script>
    function toggleSettings() {
      const settingsContainer = document.getElementById('settings-container');
      settingsContainer.style.display = settingsContainer.style.display === 'none' ? 'block' : 'none';
    }
  
    // Function to handle the image upload form submission
    function handleImageUpload() {
      const form = document.querySelector("form");
      form.addEventListener("submit", function (event) {
        event.preventDefault();
        const formData = new FormData(form);
  
        fetch('/upload', {
          method: 'POST',
          body: formData
        })
        .then(response => response.text())
        .then(data => {
          // You can handle the response data here, e.g., show a success message
          console.log(data);
        })
        .catch(error => {
          // Handle errors here
          console.error('Error:', error);
        });
      });
    }
  
    handleImageUpload();
  </script>
  
</head>
<body>
  <header>
    <div class="brand">
    </div>
    <div class="search-container">
      <input type="text" placeholder="Search books">
      <button class="search-button">Search</button>
    </div>
    <div class="user-container">
      <a href="/folders">My Folders</a>
      <img src="user-icon.png" alt="User Icon" class="user-icon" onclick="toggleSettings()">
      <div class="settings-container" id="settings-container">
        <a href="#">Profile</a>
        <a href="#">Settings</a>
        <form action="/upload" method="post" enctype="multipart/form-data">
          <input type="file" name="user_icon" accept="image/*">
          <input type="submit" value="Upload">
        </form>
        <a href="#">Logout</a>
      </div>      
    </div>
  </header>
  <main>
    <!-- Book folders content goes here -->
  </main>
</body>
</html>



{% endblock %}
